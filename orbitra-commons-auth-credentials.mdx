---
title: credentials
sidebarTitle: credentials
---

# `orbitra.commons.auth.credentials`

## Functions

### `get_azure_credential`

```python
get_azure_credential(tenant_id: str, user_app_cli: str, scope: str) -> TokenCredential
```


Resolve and return an Azure `TokenCredential` for authenticating requests.

Resolve and return an Azure `TokenCredential` for authenticating SDK clients.

This helper centralizes the logic for obtaining Azure credentials across
different authentication modes. It automatically detects which method to use
based on environment configuration, supporting four main flows:

1. **Client Secret Authentication** - if both `ORBITRA_APP_CLIENT_ID` and
   `ORBITRA_APP_CLIENT_SECRET` environment variables are set, a
   `ClientSecretCredential` (service principal) is returned.

2. **Managed Identity Authentication** - if the environment variable
   `assigned_identity_client_id` is defined (typical for Azure Container Apps,
   VMs, or Functions), a `ManagedIdentityCredential` is returned.

3. **Device Code Authentication** - if `ORBITRA_USE_DEVICE_CODE` is set to
   "true", a `DeviceCodeCredential` is returned. This is ideal for environments
   without a web browser, such as devcontainers or SSH sessions. The user will
   be prompted to visit a URL and enter a code to authenticate.

4. **Interactive Browser Authentication** - otherwise, it falls back to
   an `InteractiveBrowserCredential` for user-based sign-in with persistent
   token caching and an optional serialized authentication record.
   The first login opens a browser; subsequent runs reuse the cached token.

**Args:**
- `tenant_id`: 
Azure Active Directory (Entra ID) tenant ID.
- `user_app_cli`: 
Client ID of the user-facing Azure AD application used for browser-based login.
- `scope`: 
Resource scope requested during initial authentication .

**Returns:**
- 
A valid Azure credential object usable with SDK clients such as
`BlobServiceClient`, `SecretClient`, or `ResourceManagementClient`.

